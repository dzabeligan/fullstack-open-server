(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){e.exports=t(42)},24:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(17),u=t.n(o),c=(t(24),t(18)),i=t(6),l=t(7),m=t(4),f=function(e){var n=e.onSubmit,t=e.newPerson,r=e.onChange;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name: ",a.a.createElement("input",{name:"name",value:t.name,onChange:r})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{name:"number",value:t.number,onChange:r})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},d=t(3),s=t.n(d),h="/api/persons",b=function(){return s.a.get(h).then((function(e){return e.data})).catch((function(e){throw e}))},v=function(e){return s.a.post(h,e).then((function(e){return e.data})).catch((function(e){throw e}))},p=function(e,n){return s.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data})).catch((function(e){throw e}))},E=function(e){return s.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data})).catch((function(e){throw e}))},g=function(e){var n=e.filteredPersons,t=e.onError,r=e.onDelete;return n.map((function(e){return a.a.createElement("p",{key:e.id},e.name," ",e.number," ",a.a.createElement("button",{onClick:function(n){return function(e,n){var a=n.id,o=n.name;window.confirm("Delete ".concat(o," ?"))&&E(a,o).then((function(e){return r(a)})).catch((function(e){r(a),t({message:"the contact '".concat(o,"' was already deleted from server"),type:"error"})}))}(0,e)}},"delete"))}))},w=function(e){var n=e.value,t=e.onChange;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{type:"search",value:n,onChange:t}))},y=function(e){var n=e.type,t=e.message,r="error"===n?"red":"green",o={color:r,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,borderColor:r,padding:10,marginBottom:10};return t?a.a.createElement("div",{style:o},t):null},C=function(){var e=Object(r.useState)([]),n=Object(m.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)({name:"",number:"",id:""}),d=Object(m.a)(u,2),s=d[0],h=d[1],E=Object(r.useState)(""),C=Object(m.a)(E,2),j=C[0],O=C[1],S=Object(r.useState)({}),k=Object(m.a)(S,2),L=k[0],D=k[1];Object(r.useEffect)((function(){b().then((function(e){return o(e)}))}),[]);var P=t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(y,{type:null===L||void 0===L?void 0:L.type,message:L.message}),a.a.createElement(w,{value:j,onChange:function(e){var n=e.target.value;return O(n)}}),a.a.createElement("h2",null,"Add a new contact"),a.a.createElement(f,{onSubmit:function(e){if(e.preventDefault(),t.find((function(e){return e.name.toLowerCase()===s.name.toLowerCase()}))){if(!window.confirm("".concat(s.name," is already added to phonebook. Do you want to replace the old number with a new one?")))return;var n=t.find((function(e){return e.name.toLowerCase()===s.name.toLowerCase()})).id;return p(n,s).then((function(e){o(t.map((function(t){return t.id!==n?t:e}))),D({message:"Updated number for ".concat(s.name)}),setTimeout((function(){return D({})}),5e3)})).catch((function(e){D({message:"Information of ".concat(s.name," has already been removed from server"),type:"error"}),setTimeout((function(){return D({})}),5e3),o(t.filter((function(e){return e.id!==n})))})),void h({name:"",number:"",id:""})}v(Object(l.a)({},s,{id:t.length+1})).then((function(e){o((function(n){return[].concat(Object(c.a)(n),[e])})),D({message:"Added ".concat(s.name)}),setTimeout((function(){return D({})}),5e3),h({name:"",number:"",id:""})}))},newPerson:s,onChange:function(e){var n=e.target,t=n.name,r=n.value;return h((function(e){return Object(l.a)({},e,Object(i.a)({},t,r))}))}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(g,{filteredPersons:P,onError:function(e){D(e),setTimeout((function(){return D({})}),5e3)},onDelete:function(e){return o(t.filter((function(n){return n.id!==e})))}}))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.32ce01f8.chunk.js.map